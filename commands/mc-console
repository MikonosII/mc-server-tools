#!/usr/bin/env bash
# mc-console â€” attach to the "mc" screen session inside a CT
set -euo pipefail

usage() {
  cat <<'EOF'
Usage: mc console <CTID>

Attach to the Minecraft console (screen session "mc") inside the container.
Detach with: Ctrl+A then D
EOF
}

ctid="${1:-}"; [[ -n "$ctid" ]] || { usage >&2; exit 2; }

# ensure CT exists
pct config "$ctid" >/dev/null 2>&1 || { echo "[mc-console] CTID $ctid not found" >&2; exit 1; }

# attach as mcadmin; -xRR attaches or reattaches
exec pct exec "$ctid" -- sudo -u mcadmin screen -xRR mc
